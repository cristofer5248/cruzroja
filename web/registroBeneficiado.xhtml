<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:b="http://bootsfaces.net/ui"
                template="./WEB-INF/plantillaboot.xhtml"
                xmlns:p="http://primefaces.org/ui"
                >
    <ui:define name="title">
        <title> Beneficiados</title>
    </ui:define>
    <ui:define name="contenido">
    <center>
            <h:form id="filtro">
                <p:outputLabel value="Filtrar por apellidos: " />
                <h:inputText value="#{beneficiadoBeans.apellidos}">
                </h:inputText>
                <p:commandButton style="margin-left: 5px; background:none;" value="filtrar" icon="fa fa-fw fa-filter" update="datosbeneficiados" actionListener="#{beneficiadoBeans.listaEstudiantes()}">

                </p:commandButton>
            </h:form>
        </center>

        <p:row>
            <h:form id="datosbeneficiados">
                <b:dataTable styleClass="table" value="#{beneficiadoBeans.beneficiadolist}" var="est" rendered="#{beneficiadoBeans.beneficiadolist.size()>0}" excel="true" pdf="true" columnVisibility="true">  
                    <h:column>
                        <f:facet name="header">
                            <h:outputLabel value="Nombre"/>
                        </f:facet>
                        <h:outputText value="#{est.nombres}"/>                          
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:outputLabel value="Apellido"/>
                        </f:facet>
                        <h:outputText value="#{est.apellidos}"/>
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <h:outputLabel value="Sexo"/>
                        </f:facet>
                        <h:outputText value="#{est.genero.nombre}"/>

                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:outputLabel value="Correo"/>
                        </f:facet>
                        <h:outputText value="#{est.correo}"/>

                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:outputLabel value="Edad"/>
                        </f:facet>
                        <h:outputText value="#{est.edad}"/>

                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:outputLabel value="Operaciones"/>
                        </f:facet>
                        <h:commandButton value="Eliminar" class="btn btn-danger" style="margin-right:10px" 
                                         action="#{beneficiadoBeans.eliminarBeneficiado()}" onclick="return confirmarEliminacion();">

                            <f:param name="codigo" value="#{est.idusuario}"/>
                        </h:commandButton>

                        <b:commandButton value="Proyectos" look="warning" style="margin-right:10px"   
                                         action="#{proyectosbeneficiadoBean.meterbeneficiadoid()}">
                            <f:param name="codigo" value="#{est.idusuario}"/>
                        </b:commandButton>
                        <b:commandButton value="PDF proyectos" style="margin-right:10px" iconAwesome="fa-file-pdf-o" look="warning"
                                         actionListener="#{proyectosbeneficiadoBean.pdfbene}">     
                            <f:param name="codigo" value="#{est.idusuario}"/>
                        </b:commandButton>
                    </h:column> 
                </b:dataTable>
            </h:form>
        </p:row>


        <h:outputScript>
            <c:if test = "#{not empty flash.exito}" >
                alertify.success('#{flash.exito}');               
            </c:if>
            function confirmarEliminacion(){
            return confirm("¿Está seguro que desea eliminar este beneficiado?");
            }
        </h:outputScript>            
    </ui:define>
</ui:composition>